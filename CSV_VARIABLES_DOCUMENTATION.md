# CSV Variables Documentation

This document describes all variables saved in the CSV files generated by the Social Recognition Memory Task.

## File Structure

The experiment generates four CSV files:
1. **recognition_study_[participant_id]_[timestamp].csv** - Study phase data
2. **recognition_trials_[participant_id]_[timestamp].csv** - Recognition phase data
3. **recognition_questions_[participant_id]_[timestamp].csv** - Block-end questionnaire data
4. **recognition_summary_[participant_id]_[timestamp].csv** - Experiment summary (total time)

The localizer task generates one CSV file:
5. **localizer_[participant_id]_[timestamp].csv** - Localizer task data

---

## Study Phase CSV Variables

### `block`
- **Type**: Integer
- **Description**: Block number (0 = practice block, 1-10 = experimental blocks)
- **Example**: `0`, `1`, `2`

### `phase`
- **Type**: String
- **Description**: Phase identifier, always "study" for study phase data
- **Example**: `"study"`

### `trial`
- **Type**: Integer
- **Description**: Trial number within the study phase (1-indexed)
- **Example**: `1`, `2`, `3`

### `image_path`
- **Type**: String
- **Description**: Full path to the studied image file (always IMAGE_X.png, never lures)
- **Example**: `"PLACEHOLDERS/IMAGE_5.png"`

### `image_onset`
- **Type**: Float (Unix timestamp)
- **Description**: Time when the image was displayed (in seconds since epoch)
- **Example**: `1764818171.2572181`

### `image_offset`
- **Type**: Float (Unix timestamp)
- **Description**: Time when the image was removed from display (in seconds since epoch)
- **Example**: `1764818172.2572181`

### `image_duration`
- **Type**: Float (seconds)
- **Description**: Duration the image was displayed (always 1.0 second, fixed - no jitter)
- **Example**: `1.0`

### `fixation_onset`
- **Type**: Float (Unix timestamp) or None
- **Description**: Time when the fixation cross appeared before this image (None for first image)
- **Note**: Fixation appears between images, not before the first image
- **Example**: `1764818170.5`, `None`

### `fixation_offset`
- **Type**: Float (Unix timestamp) or None
- **Description**: Time when the fixation cross was removed (None for first image)
- **Example**: `1764818171.0`, `None`

### `fixation_duration`
- **Type**: Float (seconds) or None
- **Description**: Duration of the fixation cross before this image
- **Distribution**: Uniform random between 0.25-0.75 seconds (`random.uniform(0.25, 0.75)`)
- **Jitter**: Each fixation duration is independently drawn from uniform distribution
- **None for first image**: No fixation appears before the first image
- **Example**: `0.523456789`, `0.312345`, `0.678901`, `None`

---

## Recognition Phase CSV Variables

### `block`
- **Type**: Integer
- **Description**: Block number (0 = practice block, 1-10 = experimental blocks)
- **Example**: `0`, `1`, `2`

### `trial`
- **Type**: Integer
- **Description**: Trial number within the recognition phase (1-indexed)
- **Example**: `1`, `2`, `3`

### `phase`
- **Type**: String
- **Description**: Phase identifier, always "recognition" for recognition phase data
- **Example**: `"recognition"`

### `trial_type`
- **Type**: String
- **Description**: Type of trial - either "studied" (original Image version) or "lure" (Lure version of the same object)
- **Example**: `"studied"`, `"lure"`

### `is_studied`
- **Type**: Boolean
- **Description**: True if this is a studied image (original), False if it's a lure
- **Example**: `True`, `False`

### `image_path`
- **Type**: String
- **Description**: Full path to the image shown (Image_XXX.jpg for studied, Lure_XXX.jpg for lures)
  - **Important**: For lures, this is the lure version of the **same object** that was studied (e.g., if `Image_041.jpg` was studied, the lure would be `Lure_041.jpg`, not a random lure from a different object)
- **Example**: `"STIMULI/FRUIT/Apple/Image_041.jpg"`, `"STIMULI/FRUIT/Apple/Lure_041.jpg"`

### `image_onset`
- **Type**: Float (Unix timestamp)
- **Description**: Time when the recognition image was displayed (in seconds since epoch)
- **Example**: `1764818192.494316`

### `participant_first`
- **Type**: Boolean
- **Description**: Always True - participant always responds first in all blocks
- **Example**: `True`

---

## Participant Response Variables

### `participant_slider_value`
- **Type**: Float (0.0 to 1.0)
- **Description**: Participant's confidence rating on the slider
  - Values closer to 0.0 = OLD (studied)
  - Values closer to 1.0 = NEW (lure)
  - 0.5 = center/uncertain
- **Example**: `0.3142361111111111`, `0.7890563378785669`

### `participant_rt`
- **Type**: Float (seconds)
- **Description**: Participant's reaction time from image onset to when they clicked SUBMIT
- **Timeout**: If participant doesn't respond within 7.0 seconds, random answer selected and RT = 7.0
- **Example**: `4.68976616859436`, `2.981760025024414`, `7.0` (timeout)

### `participant_commit_time`
- **Type**: Float (Unix timestamp)
- **Description**: Time when participant clicked the SUBMIT button
- **Example**: `1764818198.3314402`

### `participant_slider_timeout`
- **Type**: Boolean
- **Description**: True if participant timed out (didn't respond within 7.0 seconds)
- **Timeout duration**: 7.0 seconds (fixed, no jitter)
- **Example**: `True`, `False`

### `participant_slider_stop_time`
- **Type**: Float (Unix timestamp) or None
- **Description**: Time when participant clicked on the slider to set their rating. None if they never clicked on the slider.
- **Example**: `1764818195.5`, `None`

---

## AI/Partner Response Variables

### `ai_slider_value`
- **Type**: Float (0.0 to 1.0)
- **Description**: AI/partner's confidence rating on the slider
  - Values closer to 0.0 = OLD (studied)
  - Values closer to 1.0 = NEW (lure)
- **Example**: `0.6569413750565093`, `0.3563797294608513`

### `ai_rt`
- **Type**: Float (seconds)
- **Description**: AI's reaction time (drawn from log-normal distribution, capped at 5 seconds)
- **Distribution**: Log-normal with underlying normal parameters: mu = 0.5, sigma = 0.3
- **Mean RT**: Approximately 1.5-2.5 seconds
- **Maximum RT**: 5.0 seconds (capped)
- **Jitter**: Each trial draws independently from the distribution
- **Formula**: `min(np.random.lognormal(0.5, 0.3), 5.0)`
- **Example**: `2.2821904016769365`, `1.2902461381415058`, `4.5`

### `ai_decision_time`
- **Type**: Float (Unix timestamp)
- **Description**: Time when AI internally made its decision (right after make_decision() call)
- **Example**: `1764818198.338135`

### `ai_slider_display_time`
- **Type**: Float (Unix timestamp)
- **Description**: Time when AI's submit button was clicked in the animation (visual commit time)
- **Example**: `1764818200.155891`

### `ai_correct`
- **Type**: Boolean
- **Description**: True if AI's decision was correct (matches ground truth), False otherwise
- **Example**: `True`, `False`

---

## Switch/Stay Decision Variables

### `switch_stay_decision`
- **Type**: String
- **Description**: Participant's decision - "stay" (keep own answer) or "switch" (use partner's answer)
- **Example**: `"stay"`, `"switch"`

### `switch_rt`
- **Type**: Float (seconds)
- **Description**: Reaction time from when decision screen appeared to when participant clicked STAY or SWITCH
- **Example**: `2.829475164413452`, `1.4260890483856201`

### `switch_commit_time`
- **Type**: Float (Unix timestamp)
- **Description**: Time when participant clicked STAY or SWITCH button
- **Example**: `1764818206.231731`

### `switch_timeout`
- **Type**: Boolean
- **Description**: True if participant timed out on switch/stay decision (didn't respond within 7.0 seconds)
- **Timeout duration**: 7.0 seconds (fixed, no jitter)
- **Example**: `True`, `False`

### `decision_onset_time`
- **Type**: Float (Unix timestamp)
- **Description**: Time when the switch/stay decision screen appeared with all information
- **Example**: `1764818203.4`

---

## Final Answer and Accuracy Variables

### `final_answer`
- **Type**: Float (0.0 to 1.0)
- **Description**: Final answer used for scoring (participant's value if stayed, AI's value if switched)
- **Example**: `0.0`, `0.3563797294608513`

### `used_ai_answer`
- **Type**: Boolean
- **Description**: True if final answer came from AI (participant switched), False if from participant (stayed)
- **Example**: `True`, `False`

### `ground_truth`
- **Type**: Float
- **Description**: Correct answer (0.0 for studied/OLD, 1.0 for lure/NEW)
- **Example**: `0.0`, `1.0`

### `participant_accuracy`
- **Type**: Boolean
- **Description**: True if final answer was correct (within 0.5 of ground truth), False otherwise
- **Example**: `True`, `False`

---

## Distance Metrics

### `euclidean_participant_to_truth`
- **Type**: Float
- **Description**: Euclidean distance between participant's slider value and ground truth
  - Lower values = closer to correct answer
- **Example**: `0.3142361111111111`, `0.0`

### `euclidean_ai_to_truth`
- **Type**: Float
- **Description**: Euclidean distance between AI's slider value and ground truth
  - Lower values = closer to correct answer
- **Example**: `0.6569413750565093`, `0.0`

### `euclidean_participant_to_ai`
- **Type**: Float
- **Description**: Euclidean distance between participant's and AI's slider values
  - Lower values = more similar ratings
- **Example**: `0.6569413750565093`, `0.042143618349740175`

---

## Outcome Variables

### `outcome_time`
- **Type**: Float (Unix timestamp)
- **Description**: Time when the outcome screen (Correct/Incorrect) was displayed
- **Example**: `1764818206.237804`

### `block_start_time`
- **Type**: Float (Unix timestamp)
- **Description**: Time when the block started (when study phase began)
- **Example**: `1764818000.0`

### `block_end_time`
- **Type**: Float (Unix timestamp)
- **Description**: Time when the block ended (after block-end questions)
- **Example**: `1764818300.0`

### `block_duration_seconds`
- **Type**: Float (seconds)
- **Description**: Total duration of the block in seconds (from start of study phase to end of questions)
- **Example**: `300.5`

### `block_duration_minutes`
- **Type**: Float (minutes)
- **Description**: Total duration of the block in minutes
- **Example**: `5.008`

### `coins_earned`
- **Type**: Float
- **Description**: Points earned this trial (based on Euclidean distance from correct answer)
  - Formula: `1.0 - euclidean_distance(final_answer, ground_truth)`
  - Range: 0.0 to 1.0
  - Includes correctness points + social feedback bonus (randomly 0.5-0.75 if social feedback shown)
- **Example**: `0.6857638888888889`, `0.0`, `1.0`

### `social_feedback`
- **Type**: Boolean
- **Description**: True if social feedback was shown (50% chance if participant switched)
- **Example**: `True`, `False`

### `social_feedback_time`
- **Type**: Float (Unix timestamp) or None
- **Description**: Time when social feedback screen appeared (if shown), None otherwise
- **Example**: `1764818220.497657`, `None`

---

## Block-End Questions CSV Variables

The **recognition_questions_[participant_id]_[timestamp].csv** file contains responses to questions asked at the end of each block (including practice block).

### `participant_id`
- **Type**: String
- **Description**: Participant identifier
- **Example**: `"kini"`, `"P001"`

### `block`
- **Type**: Integer
- **Description**: Block number (0 = practice block, 1-10 = experimental blocks)
- **Example**: `0`, `1`, `2`

### `trust_rating`
- **Type**: Float (0.0 to 1.0)
- **Description**: Response to "How much did you trust your partner?" on slider
  - 0.0 = "Not at all" (left side)
  - 1.0 = "Completely" (right side)
- **Example**: `0.6163194444444444`, `0.5`, `0.9`

### `trust_rt`
- **Type**: Float (seconds)
- **Description**: Reaction time for the trust rating question (time from question onset to response)
- **Note**: If timeout occurred, this will be 7.0 seconds
- **Example**: `3.005747079849243`, `2.5`, `7.0`

### `question_timeout`
- **Type**: Boolean
- **Description**: True if participant timed out on the trust rating question - didn't respond within 7.0 seconds
- **Timeout duration**: 7.0 seconds (fixed, no jitter)
- **Example**: `True`, `False`

---

## Summary CSV Variables

The **recognition_summary_[participant_id]_[timestamp].csv** file contains overall experiment summary data.

### `participant_id`
- **Type**: String
- **Description**: Participant identifier
- **Example**: `"kini"`, `"P001"`

### `experiment_start_time`
- **Type**: Float (Unix timestamp)
- **Description**: Time when experiment started (after initial instructions)
- **Example**: `1764818000.0`

### `experiment_end_time`
- **Type**: Float (Unix timestamp)
- **Description**: Time when experiment ended (after final instructions)
- **Example**: `1764820800.0`

### `total_task_time_seconds`
- **Type**: Float (seconds)
- **Description**: Total duration of the experiment in seconds
- **Example**: `2800.5`

### `total_task_time_minutes`
- **Type**: Float (minutes)
- **Description**: Total duration of the experiment in minutes
- **Example**: `46.675`

---

## Notes

- All timestamps are in Unix time (seconds since January 1, 1970)
- All slider values range from 0.0 (OLD/studied) to 1.0 (NEW/lure)
- Timeout variables are True if the participant didn't respond within the time limit:
  - Slider and switch/stay decisions: 7 seconds
  - Block-end questions: 7 seconds each
- The experiment saves data incrementally after each trial, not just at the end
- Block 0 is the practice block (3 trials), blocks 1-5 are experimental blocks (20 trials each)
- One question (trust rating) is asked after each block (including practice block)
- Points are calculated based on Euclidean distance: `points = 1.0 - distance(final_answer, ground_truth)`
- **Block structure**:
  - Block 1: Reliable (0.75 accuracy), Participant first
  - Block 2: Unreliable (0.25 accuracy), Participant first
  - Block 3: Unreliable (0.25 accuracy), Participant first
  - Block 4: Reliable (0.75 accuracy), Participant first
  - Block 5: Unreliable (0.25 accuracy), Participant first
- **Turn-taking**: Participant always goes first in all blocks
- **Study phase timing**:
  - Images are shown for **1.0 second each** (fixed duration, no jitter)
  - **Jittered fixations** appear between images: **0.25-0.75 seconds** (uniform random distribution)
  - Fixation jitter: `random.uniform(0.25, 0.75)` - each fixation independently drawn
  - No fixation before the first image
  - 19 fixations per block (between 20 images)
  - Total study phase duration: ~29 seconds (varies due to fixation jitter)
- **Recognition phase timing**:
  - **Pre-trial fixation**: 0.5 seconds (fixed duration, shown before each image)
  - Images are shown for **1.0 second each** (fixed duration, no jitter)
  - **Jittered fixations** appear between trials: **0.25-0.75 seconds** (uniform random distribution)
  - Inter-trial jitter: `random.uniform(0.25, 0.75)` - each jitter independently drawn
  - Jitter shown as fixation cross during the inter-trial interval
  - No jitter after the last trial in each block
  - 19 jittered fixations per block (between 20 trials)
  - Image remains visible until participant responds or timeout
  - Participant slider timeout: **7.0 seconds** (fixed)
  - AI RT: Log-normal distribution (mu=0.5, sigma=0.3), capped at 5.0 seconds
- **Switch/stay decision timing**:
  - Decision timeout: **7.0 seconds** (fixed)
- **Question timing**:
  - Trust rating timeout: **7.0 seconds** (fixed)
- **Block timing**: `block_start_time`, `block_end_time`, and `block_duration_seconds`/`block_duration_minutes` are added to all trials within a block. These values are updated at the end of each block, so they represent the complete block duration from study phase start to questions completion.

---

## Localizer Task CSV Variables

The **localizer_[participant_id]_[timestamp].csv** file contains data from the localizer task, where participants view 100 images in random order and answer category questions at every 10th image.

### `participant_id`
- **Type**: String
- **Description**: Participant identifier
- **Example**: `"P001"`, `"test_user"`

### `trial`
- **Type**: Integer
- **Description**: Trial number when the question was asked (always a multiple of 10: 10, 20, 30, ..., 100)
- **Example**: `10`, `20`, `30`, `100`

### `stimulus_number`
- **Type**: Integer (1-100)
- **Description**: The stimulus number of the image that was shown (from Image_001.jpg to Image_100.jpg)
- **Example**: `1`, `42`, `100`

### `object_name`
- **Type**: String
- **Description**: Name of the object folder containing the image (e.g., "Apple", "Car", "Elephant")
- **Example**: `"Apple"`, `"Car"`, `"Elephant"`

### `category`
- **Type**: String
- **Description**: Category folder name that the image belongs to
- **Possible values**: `"BIG_ANIMAL"`, `"BIG_OBJECT"`, `"BIRD"`, `"FOOD"`, `"FRUIT"`, `"INSECT"`, `"SMALL_ANIMAL"`, `"SMALL_OBJECT"`, `"VEGETABLE"`, `"VEHICLE"`
- **Example**: `"FRUIT"`, `"BIG_ANIMAL"`

### `question_category`
- **Type**: String
- **Description**: The category that was asked about in the question (same as `category` since we ask about the image's actual category)
- **Possible values**: Same as `category`
- **Example**: `"FRUIT"`, `"BIG_ANIMAL"`

### `question_text`
- **Type**: String
- **Description**: Full text of the question asked to the participant
- **Format**: "Was the last object a [category]?" where category is converted from folder name (e.g., "BIG_ANIMAL" → "big animal")
- **Example**: `"Was the last object a big animal?"`, `"Was the last object a fruit?"`

### `answer`
- **Type**: Boolean
- **Description**: Participant's response to the question (True = YES, False = NO)
- **Example**: `True`, `False`

### `correct_answer`
- **Type**: Boolean
- **Description**: The correct answer to the question (always True, since we ask about the category the image actually belongs to)
- **Example**: `True`

### `correct`
- **Type**: Boolean
- **Description**: Whether the participant's answer matches the correct answer (True if correct, False if incorrect)
- **Example**: `True`, `False`

---

## Localizer Task CSV Variables

The localizer task generates one CSV file:
- **localizer_[participant_id]_[timestamp].csv** - Localizer task data

**File Format**: Each row represents one image presentation. Question trials (every 10th image) include question response data.

### `participant_id`
- **Type**: String
- **Description**: Participant identifier
- **Example**: `"kini"`, `"P001"`

### `trial`
- **Type**: Integer
- **Description**: Trial number (1-indexed, 1-200)
- **Note**: Questions are asked at trials 10, 20, 30, ..., 200 (every 10th trial)
- **Example**: `1`, `10`, `50`, `200`

### `stimulus_number`
- **Type**: Integer (1-100)
- **Description**: The stimulus number of the image (from Image_001.jpg to Image_100.jpg, or corresponding Lure)
- **Example**: `1`, `42`, `100`

### `object_name`
- **Type**: String
- **Description**: Name of the object folder containing the image (e.g., "Apple", "Car", "Elephant")
- **Example**: `"Apple"`, `"Car"`, `"Elephant"`

### `category`
- **Type**: String
- **Description**: Category folder name that the image belongs to
- **Possible values**: `"BIG_ANIMAL"`, `"BIG_OBJECT"`, `"BIRD"`, `"FOOD"`, `"FRUIT"`, `"INSECT"`, `"SMALL_ANIMAL"`, `"SMALL_OBJECT"`, `"VEGETABLE"`, `"VEHICLE"`
- **Example**: `"FRUIT"`, `"BIG_ANIMAL"`

### `stimulus_type`
- **Type**: String
- **Description**: Type of stimulus shown
- **Possible values**: `"Image"` (original image), `"Lure"` (lure version)
- **Example**: `"Image"`, `"Lure"`

### `is_lure`
- **Type**: Boolean
- **Description**: True if this is a lure stimulus, False if it's an original Image
- **Example**: `True`, `False`

### `presentation_time`
- **Type**: String (datetime format)
- **Description**: Timestamp when the image was displayed
- **Format**: `"YYYY-MM-DD HH:MM:SS.ffffff"`
- **Example**: `"2026-01-30 23:21:31.123456"`

### `is_question_trial`
- **Type**: Boolean
- **Description**: True if this trial included a category question (trials 10, 20, 30, ..., 200), False otherwise
- **Example**: `True`, `False`

### `question_category`
- **Type**: String or None
- **Description**: The category that was asked about in the question (only populated for question trials)
- **Possible values**: Same as `category`, or `None` for non-question trials
- **Example**: `"FRUIT"`, `"BIG_ANIMAL"`, `None`

### `question_text`
- **Type**: String or None
- **Description**: Full text of the question asked to the participant (only populated for question trials)
- **Format**: "Was the last object a [category]?" where category is converted from folder name (e.g., "BIG_ANIMAL" → "big animal")
- **Example**: `"Was the last object a big animal?"`, `"Was the last object a fruit?"`, `None`

### `answer`
- **Type**: Boolean, String, or None
- **Description**: Participant's response to the question
- **Possible values**: 
  - `True` (YES) for question trials where participant answered YES
  - `False` (NO) for question trials where participant answered NO
  - `"TIMEOUT"` if participant timed out (though localizer has no timeout)
  - `None` for non-question trials
- **Example**: `True`, `False`, `None`

### `correct_answer`
- **Type**: Boolean or None
- **Description**: The correct answer to the question (always True for question trials, since we ask about the category the image actually belongs to)
- **Example**: `True`, `None`

### `correct`
- **Type**: Boolean or None
- **Description**: Whether the participant's answer matches the correct answer
- **Possible values**: `True` (correct), `False` (incorrect), `None` (non-question trial or timeout)
- **Example**: `True`, `False`, `None`

### `timed_out`
- **Type**: Boolean or None
- **Description**: Whether the participant timed out on the question (always False for localizer, as there is no timeout)
- **Example**: `False`, `None`

### `response_time`
- **Type**: Float (seconds) or None
- **Description**: Time taken to respond to the question, measured from question onset to button press
- **Example**: `1.234`, `2.567`, `None`

---

## Notes on Localizer Task

- **Image presentation timing**:
  - Each image is displayed for **1.0 second** (fixed duration, no jitter)
  - **0.5 second pause** between images (fixed, no jitter)
  - Total images: 200 (100 Image + 100 Lure versions)
  - Total image presentation time: 200 images × 1.0 second = 200 seconds (~3.3 minutes)
  - Total inter-image pause time: 199 pauses × 0.5 seconds = 99.5 seconds
  - Total task duration: ~300 seconds (~5 minutes) plus question response times
- **Question timing**:
  - Questions are asked at trials 10, 20, 30, 40, 50, 60, 70, 80, 90, 100, 110, 120, 130, 140, 150, 160, 170, 180, 190, 200 (20 questions total)
  - **No timeout** for questions - participant must respond (YES/NO buttons)
  - Question appears immediately after the image is shown
- **Category conversion**: Category names are converted from folder format (e.g., "BIG_ANIMAL") to natural language (e.g., "big animal") for the question
- **Correct answer**: The correct answer is always True since we ask about the category the image actually belongs to
- **File saving**: 
  - Skipped if "test" (case-insensitive) is in the participant name
  - For touch screen mode: files saved to `../LOG_FILES/` directory
  - For click/mouse mode: files saved to the current directory
  - File naming format: `localizer_[participant_id]_[timestamp].csv`
  - Example: `localizer_kini_20260130_232131.csv`

